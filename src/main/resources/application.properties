# Fractal Notification Engine Configuration

# Enable/Disable notification engine
fractal.notify.enabled=true

# Async Configuration
fractal.notify.async.mode=async
fractal.notify.async.enabled=true
fractal.notify.async.core-pool-size=5
fractal.notify.async.max-pool-size=10
fractal.notify.async.queue-capacity=100

# Email Configuration
fractal.notify.email.provider=smtp
fractal.notify.email.smtp.host=${EMAIL_HOST:smtp.gmail.com}
fractal.notify.email.smtp.port=${EMAIL_PORT:587}
fractal.notify.email.smtp.username=${EMAIL_USERNAME:noreplayfractal@gmail.com}
fractal.notify.email.smtp.password=${EMAIL_PASSWORD:wriy wepz cnol kwkk}
fractal.notify.email.smtp.from=${EMAIL_FROM:noreplayfractal@gmail.com}
fractal.notify.email.smtp.reply-to=${EMAIL_REPLY_TO:}

# SMS Configuration
fractal.notify.sms.provider=twilio
fractal.notify.sms.twilio.account-sid=${TWILIO_ACCOUNT_SID}
fractal.notify.sms.twilio.auth-token=${TWILIO_AUTH_TOKEN}
fractal.notify.sms.twilio.from-number=${TWILIO_FROM_NUMBER}

# WhatsApp Configuration
fractal.notify.whatsapp.provider=twilio
fractal.notify.whatsapp.enabled=true
fractal.notify.whatsapp.twilio.account-sid=${TWILIO_WHATSAPP_ACCOUNT_SID}
fractal.notify.whatsapp.twilio.auth-token=${TWILIO_WHATSAPP_AUTH_TOKEN}
fractal.notify.whatsapp.twilio.whatsapp-from-number=${TWILIO_WHATSAPP_FROM_NUMBER:whatsapp:+1234567890}

# Persistence Configuration
fractal.notify.persistence.enabled=true
fractal.notify.persistence.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/notifications}
fractal.notify.persistence.datasource.username=${DB_USERNAME:postgres}
fractal.notify.persistence.datasource.password=${DB_PASSWORD:postgres}
fractal.notify.persistence.datasource.driver-class-name=org.postgresql.Driver

# Queue Configuration (Database Queue)
# When enabled, notifications are persisted to DB and processed by scheduler
# When disabled, notifications are sent immediately via async publisher
fractal.notify.queue.enabled=false
fractal.notify.queue.poll-interval=5000
fractal.notify.queue.batch-size=10
fractal.notify.queue.max-retries=3
fractal.notify.queue.retry-delay=60000

# Storage Configuration (for email attachments)
fractal.notify.storage.provider=azure-blob
fractal.notify.storage.azure-blob.connection-string=${AZURE_STORAGE_CONNECTION_STRING:}
fractal.notify.storage.azure-blob.container-name=${AZURE_STORAGE_CONTAINER_NAME:email-attachments}

# Test/Preview Configuration (optional - for template preview)
# fractal.notify.test.enabled=true
